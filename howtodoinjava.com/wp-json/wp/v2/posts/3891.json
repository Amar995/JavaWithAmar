{"id":3891,"date":"2014-05-22T16:59:33","date_gmt":"2014-05-22T11:29:33","guid":{"rendered":"http:\/\/howtodoinjava.com\/?p=3891"},"modified":"2022-04-16T01:31:08","modified_gmt":"2022-04-15T20:01:08","slug":"delete-directory-recursively","status":"publish","type":"post","link":"https:\/\/howtodoinjava.com\/java\/io\/delete-directory-recursively\/","title":{"rendered":"Delete a Directory Recursively in Java"},"content":{"rendered":"\n<p>Learn to use classes from Java IO, New IO and Commons IO to <strong>delete a directory including all the subdirectories and files<\/strong> in it.<\/p>\n\n\n\t\t\t\t<div class=\"wp-block-uagb-table-of-contents uagb-toc__align-left uagb-toc__columns-1   uagb-block-34de2d59 \" \n\t\t\t\t\tdata-scroll= \"1\"\n\t\t\t\t\tdata-offset= \"30\"\n\t\t\t\t\tdata-delay= \"800\"\n\t\t\t\t>\n\t\t\t\t<div class=\"uagb-toc__wrap\">\n\t\t\t\t\t<div class=\"uagb-toc__title-wrap\">\n\t\t\t\t\t\t<div class=\"uagb-toc__title\">\n\t\t\t\t\t\t\tTable Of Contents\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"uagb-toc__list-wrap\">\n\t\t\t\t\t\t<ol class=\"uagb-toc__list\"><li class=\"uagb-toc__list\"><a href=\"#1-using-fileutilsdeletedirectory-from-apache-commons-io\">1. Using FileUtils.deleteDirectory() from Apache Commons IO<\/a><li class=\"uagb-toc__list\"><a href=\"#2-using-filesdelete-from-java-nio\">2. Using Files.delete() from Java NIO<\/a><li class=\"uagb-toc__list\"><a href=\"#3-deleting-directory-in-java-8\">3. Deleting Directory in Java 8<\/a><\/ol>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\n\n\n<h2>1. Using <em>FileUtils.deleteDirectory()<\/em> from Apache Commons IO<\/h2>\n\n\n\n<p>Include <a href=\"https:\/\/mvnrepository.com\/artifact\/commons-io\/commons-io\" target=\"_blank\" rel=\"noreferrer noopener\">Commons IO<\/a> module in the project using Maven dependencies.<\/p>\n\n\n\n<pre title=\"Dependency\" class=\"wp-block-code\"><code lang=\"java\" class=\"language-java\">&lt;dependency>\r\n    &lt;groupId>commons-io&lt;\/groupId>\r\n    &lt;artifactId>commons-io&lt;\/artifactId>\r\n    &lt;version>2.11.0&lt;\/version>\r\n&lt;\/dependency><\/code><\/pre>\n\n\n\n<p>The Commons IO module has class <a href=\"https:\/\/commons.apache.org\/proper\/commons-io\/javadocs\/api-2.5\/org\/apache\/commons\/io\/FileUtils.html\" target=\"_blank\" rel=\"noopener noreferrer\">FileUtils<\/a>. It&#8217;s <code>deleteDirectory(dir)<\/code> method can be used to delete a directory along with all sub-directories and files inside it. <\/p>\n\n\n\n<p>This method throws <code>IOException<\/code>\u00a0in case deletion is unsuccessful for any reason.<\/p>\n\n\n\n<pre title=\"Delete a directory, sub-directories and all files in it\" class=\"wp-block-code\"><code lang=\"java\" class=\"language-java\">File file = FileUtils.getFile(\"c:\/temp\/innerDir\");\r\n\r\nFileUtils.deleteDirectory( file );<\/code><\/pre>\n\n\n\n<p>Use another method <code>deleteQuitly(dir)<\/code>  to delete quietly. This method never throws an exception. It returns <code>true<\/code>\u00a0if the directory was deleted, otherwise\u00a0<code>false<\/code>.<\/p>\n\n\n\n<pre title=\"Delete a directory quietly\" class=\"wp-block-code\"><code lang=\"java\" class=\"language-java\">File file = FileUtils.getFile(\"c:\/temp\/innerDir\");\n\nboolean isDeleted = FileUtils.deleteQuietly( file );<\/code><\/pre>\n\n\n\n<h2>2. Using <em>Files.delete()<\/em> from Java NIO<\/h2>\n\n\n\n<p>Another approach in Java documentation is to use <code>Files.walkFileTree()<\/code> to iterate over all the sub-directories and files in a given directory and delete them one by one.<\/p>\n\n\n\n<p>It works in two steps recursively:<\/p>\n\n\n\n<ol><li>It first deletes all files in a directory; then<\/li><li>It deletes the directory itself<\/li><\/ol>\n\n\n\n<p>This Java example uses <code><a title=\"Files.walkFileTree() method\" href=\"http:\/\/docs.oracle.com\/javase\/7\/docs\/api\/java\/nio\/file\/Files.html#walkFileTree%28java.nio.file.Path,%20java.nio.file.FileVisitor%29\">Files.walkFileTree()<\/a><\/code> method and <code><a title=\"SimpleFileVisitor\" href=\"http:\/\/docs.oracle.com\/javase\/7\/docs\/api\/java\/nio\/file\/SimpleFileVisitor.html\">SimpleFileVisitor<\/a><\/code> to perform delete operation.<\/p>\n\n\n\n<pre title=\"Deleting a directory recursively\" class=\"wp-block-code\"><code lang=\"java\" class=\"language-java\">import java.io.IOException;\nimport java.nio.file.FileVisitResult;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.SimpleFileVisitor;\nimport java.nio.file.attribute.BasicFileAttributes;\n\npublic class DeleteDirectoryNIO\n{\n\tpublic static void main(String[] args)\n\t{\n\t\tPath dir = Paths.get(\"c:\/temp\/innerDir\");\n\t\ttry\n\t\t{\n\t\t\tFiles.walkFileTree(dir, new SimpleFileVisitor&amp;lt;Path&amp;gt;()\n\t\t\t{\n\t\t\t      @Override\n\t\t\t      public FileVisitResult visitFile(Path file, BasicFileAttributes attrs)\n\t\t\t    \t\t  throws IOException\n\t\t\t      {\n\t\t\t          System.out.println(\"Deleting the file: \" + file);\n\t\t\t          Files.delete(file);\n\t\t\t          return FileVisitResult.CONTINUE;\n\t\t\t      }\n\n\t\t\t      @Override\n\t\t\t      public FileVisitResult postVisitDirectory(Path dir,\n\t\t\t              IOException exc) throws IOException\n\t\t\t      {\n\t\t\t          System.out.println(\"Deleting the dir: \" + dir);\n\t\t\t          if (exc == null) {\n\t\t\t              Files.delete(dir);\n\t\t\t              return FileVisitResult.CONTINUE;\n\t\t\t          } else {\n\t\t\t              throw exc;\n\t\t\t          }\n\t\t\t\t   }\n\n\t\t\t\t});\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t  e.printStackTrace();\n\t\t}\n\t}\n}<\/code><\/pre>\n\n\n\n<h2>3. Deleting Directory in Java 8<\/h2>\n\n\n\n<p>Since Java 8, we can combine the Java NIO operations with <a href=\"https:\/\/howtodoinjava.com\/java\/stream\/java-streams-by-examples\/\">java streams<\/a> and the above approach becomes so much cleaner.<\/p>\n\n\n\n<pre title=\"Deleting a directory recursively in Java 8\" class=\"wp-block-code\"><code lang=\"java\" class=\"language-java\">public class DeleteDirectoryNIOWithStream\n{\n\tpublic static void main(String[] args)\n\t{\n\t\tPath dir = Paths.get(\"c:\/temp\/innerDir\");\n\n\t\tFiles.walk(dir)\n      \t\t    .sorted(Comparator.reverseOrder())\n      \t\t    .map(Path::toFile)\n      \t\t    .forEach(File::delete);\n\t}\n}<\/code><\/pre>\n\n\n\n<p>Here, <code>Files.walk()<\/code> returns a Stream of paths denoting the contents of directories (i.e. files) before directories themselves. Thereafter it maps <code>Path<\/code> to <code>File<\/code> and deletes each file. Now you use <code>delete()<\/code> method to delete the file itself.<\/p>\n\n\n\n<p>Use the above code examples handy whenever you want to <strong>delete a directory with all files<\/strong> inside it.<\/p>\n\n\n\n<p>Happy Learning !!<\/p>\n\n\n\n<blockquote class=\"wp-block-quote is-style-default download\"><p><a href=\"https:\/\/github.com\/lokeshgupta1981\/Core-Java\/tree\/master\/src\/main\/java\/com\/howtodoinjava\/io\" target=\"_blank\" rel=\"noreferrer noopener\">Source Code on Github<\/a><\/p><\/blockquote>\n","protected":false},"excerpt":{"rendered":"<p>Learn to use classes from Java IO, New IO and Commons IO to delete a directory including all the subdirectories and files in it.<\/p>\n","protected":false},"author":2,"featured_media":20207,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[19],"tags":[1418],"uagb_featured_image_src":{"full":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA.jpg",750,425,false],"thumbnail":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA-150x150.jpg",150,150,true],"medium":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA-300x170.jpg",300,170,true],"medium_large":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA.jpg",750,425,false],"large":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA.jpg",750,425,false],"1536x1536":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA.jpg",750,425,false],"2048x2048":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA.jpg",750,425,false],"yarpp-thumbnail":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2019\/03\/JAVA-120x120.jpg",120,120,true]},"uagb_author_info":{"display_name":"Lokesh Gupta","author_link":"https:\/\/howtodoinjava.com\/author\/lokeshgupta1981\/"},"uagb_comment_info":2,"uagb_excerpt":"Learn to use classes from Java IO, New IO and Commons IO to delete a directory including all the subdirectories and files in it.","_links":{"self":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/posts\/3891"}],"collection":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/comments?post=3891"}],"version-history":[{"count":0,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/posts\/3891\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/media\/20207"}],"wp:attachment":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/media?parent=3891"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/categories?post=3891"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/tags?post=3891"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}