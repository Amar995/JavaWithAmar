{"id":21350,"date":"2022-05-22T13:31:51","date_gmt":"2022-05-22T08:01:51","guid":{"rendered":"https:\/\/howtodoinjava.com\/?p=21350"},"modified":"2022-05-22T13:33:09","modified_gmt":"2022-05-22T08:03:09","slug":"log4j2-tutorial","status":"publish","type":"post","link":"https:\/\/howtodoinjava.com\/log4j2\/log4j2-tutorial\/","title":{"rendered":"Log4j2 Tutorial"},"content":{"rendered":"\n<p>Apache <strong>Log4j2<\/strong> is an upgrade to Log4j 1.x that provides significant improvements over its predecessor. This page list down various hello world configuration examples and useful tutorials for working with Log4j2.<\/p>\n\n\n\t\t\t\t<div class=\"wp-block-uagb-table-of-contents uagb-toc__align-left uagb-toc__columns-1   uagb-block-8369a237 \" \n\t\t\t\t\tdata-scroll= \"1\"\n\t\t\t\t\tdata-offset= \"30\"\n\t\t\t\t\tdata-delay= \"800\"\n\t\t\t\t>\n\t\t\t\t<div class=\"uagb-toc__wrap\">\n\t\t\t\t\t<div class=\"uagb-toc__title-wrap\">\n\t\t\t\t\t\t<div class=\"uagb-toc__title\">\n\t\t\t\t\t\t\tTable Of Contents\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"uagb-toc__list-wrap\">\n\t\t\t\t\t\t<ol class=\"uagb-toc__list\"><li class=\"uagb-toc__list\"><a href=\"#1-log4j2-maven-dependencies\">1. Log4j2 Maven Dependencies<\/a><li class=\"uagb-toc__list\"><a href=\"#2-log4j2-xml-configuration-example\">2. Log4j2 XML Configuration Example<\/a><li class=\"uagb-toc__list\"><a href=\"#3-log4j2-properties-configuration-example\">3. Log4j2 Properties Configuration Example<\/a><li class=\"uagb-toc__list\"><a href=\"#4-log4j2-examples\">4. Log4j2 Examples<\/a><\/ol>\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\n\n\n<h2>1. Log4j2 Maven Dependencies<\/h2>\n\n\n\n<p>To include Log4j2, include below maven dependencies.<\/p>\n\n\n\n<pre title=\"pom.xml\" class=\"wp-block-code\"><code lang=\"xml\" class=\"language-xml\">&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;\/groupId&gt;\n    &lt;artifactId&gt;log4j-core&lt;\/artifactId&gt;\n    &lt;version&gt;2.14.1&lt;\/version&gt;\n&lt;\/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;\/groupId&gt;\n    &lt;artifactId&gt;log4j-api&lt;\/artifactId&gt;\n    &lt;version&gt;2.14.1&lt;\/version&gt;\n&lt;\/dependency&gt;<\/code><\/pre>\n\n\n\n<p>Gradle dependecies are:<\/p>\n\n\n\n<pre title=\"build.gradle\" class=\"wp-block-code\"><code lang=\"properties\" class=\"language-properties\">implementation group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.14.1'\nimplementation group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.14.1'<\/code><\/pre>\n\n\n\n<blockquote class=\"wp-block-quote is-style-default\"><p>Read More : <a href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-with-slf4j\/\" target=\"_blank\" rel=\"noreferrer noopener\">Log4j2 with SLF4j Configuration<\/a><\/p><\/blockquote>\n\n\n\n<h2>2. Log4j2 XML Configuration Example<\/h2>\n\n\n\n<p>A sample <code>log4j2.xml<\/code> configuration file for reference.<\/p>\n\n\n\n<pre title=\"log4j2.xml\" class=\"wp-block-code\"><code lang=\"xml\" class=\"language-xml\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"WARN\" monitorInterval=\"30\"&gt;\n  \n    &lt;!-- Logging Properties --&gt;\n    &lt;Properties&gt;\n        &lt;Property name=\"LOG_PATTERN\"&gt;%d{yyyy-MM-dd'T'HH:mm:ss.SSSZ} %p %m%n&lt;\/Property&gt;\n        &lt;Property name=\"APP_LOG_ROOT\"&gt;c:\/temp&lt;\/Property&gt;\n    &lt;\/Properties&gt;\n      \n    &lt;Appenders&gt;\n      \n        &lt;!-- Console Appender --&gt;\n        &lt;Console name=\"Console\" target=\"SYSTEM_OUT\" follow=\"true\"&gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n        &lt;\/Console&gt;\n          \n        &lt;!-- File Appenders on need basis --&gt;\n        &lt;RollingFile name=\"frameworkLog\" fileName=\"${APP_LOG_ROOT}\/app-framework.log\"\n            filePattern=\"${APP_LOG_ROOT}\/app-framework-%d{yyyy-MM-dd}-%i.log\"&gt;\n            &lt;LevelRangeFilter minLevel=\"ERROR\" maxLevel=\"ERROR\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"\/&gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"19500KB\" \/&gt;\n            &lt;\/Policies&gt;\n            &lt;DefaultRolloverStrategy max=\"10\"\/&gt;\n        &lt;\/RollingFile&gt;\n          \n        &lt;RollingFile name=\"debugLog\" fileName=\"${APP_LOG_ROOT}\/app-debug.log\"\n            filePattern=\"${APP_LOG_ROOT}\/app-debug-%d{yyyy-MM-dd}-%i.log\"&gt;\n            &lt;LevelRangeFilter minLevel=\"DEBUG\" maxLevel=\"DEBUG\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"\/&gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"19500KB\" \/&gt;\n            &lt;\/Policies&gt;\n            &lt;DefaultRolloverStrategy max=\"10\"\/&gt;\n        &lt;\/RollingFile&gt;\n          \n        &lt;RollingFile name=\"infoLog\" fileName=\"${APP_LOG_ROOT}\/app-info.log\"\n            filePattern=\"${APP_LOG_ROOT}\/app-info-%d{yyyy-MM-dd}-%i.log\" &gt;\n            &lt;LevelRangeFilter minLevel=\"INFO\" maxLevel=\"INFO\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"\/&gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"19500KB\" \/&gt;\n            &lt;\/Policies&gt;\n            &lt;DefaultRolloverStrategy max=\"10\"\/&gt;\n        &lt;\/RollingFile&gt;\n          \n        &lt;RollingFile name=\"errorLog\" fileName=\"${APP_LOG_ROOT}\/app-error.log\"\n            filePattern=\"${APP_LOG_ROOT}\/app-error-%d{yyyy-MM-dd}-%i.log\" &gt;\n            &lt;LevelRangeFilter minLevel=\"ERROR\" maxLevel=\"ERROR\" onMatch=\"ACCEPT\" onMismatch=\"DENY\"\/&gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"19500KB\" \/&gt;\n            &lt;\/Policies&gt;\n            &lt;DefaultRolloverStrategy max=\"10\"\/&gt;\n        &lt;\/RollingFile&gt;\n          \n        &lt;RollingFile name=\"perfLog\" fileName=\"${APP_LOG_ROOT}\/app-perf.log\"\n            filePattern=\"${APP_LOG_ROOT}\/app-perf-%d{yyyy-MM-dd}-%i.log\" &gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"19500KB\" \/&gt;\n            &lt;\/Policies&gt;\n            &lt;DefaultRolloverStrategy max=\"1\"\/&gt;\n        &lt;\/RollingFile&gt;\n          \n        &lt;RollingFile name=\"traceLog\" fileName=\"${APP_LOG_ROOT}\/app-trace.log\"\n            filePattern=\"${APP_LOG_ROOT}\/app-trace-%d{yyyy-MM-dd}-%i.log\" &gt;\n            &lt;PatternLayout pattern=\"${LOG_PATTERN}\"\/&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"19500KB\" \/&gt;\n            &lt;\/Policies&gt;\n            &lt;DefaultRolloverStrategy max=\"1\"\/&gt;\n        &lt;\/RollingFile&gt;\n          \n    &lt;\/Appenders&gt;\n  \n    &lt;Loggers&gt;\n      \n        &lt;Logger name=\"com.howtodoinjava.app.somePackage\" additivity=\"false\" level=\"trace\"&gt;\n            &lt;AppenderRef ref=\"traceLog\" \/&gt;\n            &lt;AppenderRef ref=\"Console\" \/&gt;\n        &lt;\/Logger&gt;\n          \n        &lt;Logger name=\"com.howtodoinjava.app\" additivity=\"false\" level=\"debug\"&gt;\n            &lt;AppenderRef ref=\"debugLog\" \/&gt;\n            &lt;AppenderRef ref=\"infoLog\"  \/&gt;\n            &lt;AppenderRef ref=\"errorLog\" \/&gt;\n            &lt;AppenderRef ref=\"Console\"  \/&gt;\n        &lt;\/Logger&gt;\n          \n        &lt;Logger name=\"org.framework.package\" additivity=\"false\" level=\"info\"&gt;\n            &lt;AppenderRef ref=\"perfLog\" \/&gt;\n            &lt;AppenderRef ref=\"Console\"\/&gt;\n        &lt;\/Logger&gt;\n                  \n        &lt;Root level=\"warn\"&gt;\n            &lt;AppenderRef ref=\"Console\"\/&gt;\n        &lt;\/Root&gt;\n  \n    &lt;\/Loggers&gt;\n  \n&lt;\/Configuration&gt;<\/code><\/pre>\n\n\n\n<h2>3. Log4j2 Properties Configuration Example<\/h2>\n\n\n\n<p>A sample <code>log4j2.properties<\/code> file for reference.<\/p>\n\n\n\n<pre title=\"log4j2.properties\" class=\"wp-block-code\"><code lang=\"properties\" class=\"language-properties\">status = warn\nname = PropertiesConfig\n\n#Make sure to change the log file path as per your need\nproperty.filename = C:\\\\logs\\\\debug.log\n\nfilters = threshold\n\nfilter.threshold.type = ThresholdFilter\nfilter.threshold.level = debug\n\nappenders = console\n\nappender.console.type = Console\nappender.console.name = STDOUT\nappender.console.layout.type = PatternLayout\nappender.console.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n\n\nappenders = rolling\n\nappender.rolling.type = RollingFile\nappender.rolling.name = RollingFile\nappender.rolling.fileName = ${filename}\nappender.rolling.filePattern = debug-backup-%d{MM-dd-yy-HH-mm-ss}-%i.log.gz\nappender.rolling.layout.type = PatternLayout\nappender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n\nappender.rolling.policies.type = Policies\nappender.rolling.policies.time.type = TimeBasedTriggeringPolicy\nappender.rolling.policies.time.interval = 1\nappender.rolling.policies.time.modulate = true\nappender.rolling.policies.size.type = SizeBasedTriggeringPolicy\nappender.rolling.policies.size.size=10MB\nappender.rolling.strategy.type = DefaultRolloverStrategy\nappender.rolling.strategy.max = 20\n\nloggers = console, rolling\n\n#Make sure to change the package structure as per your application\n\nlogger.rolling.name = com.howtodoinjava\nlogger.rolling.level = debug\nlogger.rolling.additivity = false\nlogger.rolling.appenderRef.rolling.ref = RollingFile<\/code><\/pre>\n\n\n\n<h2>4. Log4j2 Examples<\/h2>\n\n\n\n<ol><li><a title=\"Log4j2 ConsoleAppender Example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-consoleappender-example\/\">Log4j2 ConsoleAppender Example<\/a><\/li><li><a title=\"Log4j2 RollingFileAppender example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-rollingfileappender-example\/\">Log4j2 RollingFileAppender Example<\/a><\/li><li><a href=\"https:\/\/howtodoinjava.com\/log4j2\/jdbcappender-example\/\">Log4j2 JDBCAppender Example<\/a><\/li><li><a title=\"Log4j2 LevelRangeFilter Example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/levelrangefilter-example\/\">Log4j2 LevelRangeFilter Example<\/a><\/li><li><a title=\"Log4j2 Multiple appenders example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/multiple-appenders\/\">Log4j2 Multiple appenders Example<\/a><\/li><li><a title=\"Log4j2 HTMLLayout Configuration Example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-htmllayout-configuration-example\/\">Log4j2 HTMLLayout Configuration Example<\/a><\/li><li><a title=\"Log4j2 ThreadContext \u2013 Fish Tagging Logs of Same Transaction\" href=\"https:\/\/howtodoinjava.com\/log4j2\/threadcontext-fish-tagging\/\">Log4j2 ThreadContext \u2013 Fish Tagging Logs of Same Transaction<\/a><\/li><li><a title=\"Log4j2 \u2013 Useful Conversion Pattern Examples\" href=\"https:\/\/howtodoinjava.com\/log4j2\/useful-conversion-pattern-examples\/\">Log4j2 \u2013 Useful Conversion Pattern Examples<\/a><\/li><li><a title=\"Configure Log4j2 for JUnit Testcases\" href=\"https:\/\/howtodoinjava.com\/log4j2\/configure-log4j2-for-junit\/\">Configure Log4j2 for JUnit Testcases<\/a><\/li><li><a title=\"Log4j2 JSON Configuration Example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-json-configuration-example\/\">Log4j2 JSON Configuration Example<\/a><\/li><li><a title=\"Log4j2 Properties File Example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-properties-example\/\">Log4j2 Properties File Example<\/a><\/li><li><a title=\"Log4j2 XML Configuration Example\" href=\"https:\/\/howtodoinjava.com\/log4j2\/log4j2-xml-configuration-example\/\">Log4j2 XML Configuration Example<\/a><\/li><\/ol>\n\n\n\n<p>Happy Learning !!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Log4j2 provides significant improvements over its predecessor Log4j. Read about its xml and properties configuration and various examples.<\/p>\n","protected":false},"author":2,"featured_media":18773,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[891],"tags":[1392],"uagb_featured_image_src":{"full":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2.png",768,500,false],"thumbnail":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2-150x150.png",150,150,true],"medium":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2-300x195.png",300,195,true],"medium_large":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2.png",768,500,false],"large":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2.png",768,500,false],"1536x1536":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2.png",768,500,false],"2048x2048":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2.png",768,500,false],"yarpp-thumbnail":["https:\/\/howtodoinjava.com\/wp-content\/uploads\/2021\/12\/Log4j2.png",120,78,false]},"uagb_author_info":{"display_name":"Lokesh Gupta","author_link":"https:\/\/howtodoinjava.com\/author\/lokeshgupta1981\/"},"uagb_comment_info":0,"uagb_excerpt":"Log4j2 provides significant improvements over its predecessor Log4j. Read about its xml and properties configuration and various examples.","_links":{"self":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/posts\/21350"}],"collection":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/comments?post=21350"}],"version-history":[{"count":0,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/posts\/21350\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/media\/18773"}],"wp:attachment":[{"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/media?parent=21350"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/categories?post=21350"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/howtodoinjava.com\/wp-json\/wp\/v2\/tags?post=21350"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}